<aside id="trial-sidebar">
  <el-collapse class="collapse" v-model="activedCollapse">
    <el-collapse-item name="trials">
      <template slot="title">
        <i class="fa fa-list"></i>
        庭审笔录
      </template>
      <el-table :data="trials" height="400" stripe>
        <el-table-column fixed="left" type="index" label="名称" width="140">
          <template slot-scope="scope">
            <i class="fa fa-file-text"></i>
            <span>第{{scope.$index + 1}}次庭审笔录</span>
          </template>
        </el-table-column>
        <el-table-column prop="create_time" label="时间" width="180">
        </el-table-column>
        <el-table-column prop="case_no" label="案号" width="600">
        </el-table-column>
        <el-table-column fixed="right" label="操作" width="100">
          <template slot-scope="scope">
            <el-button type="text" size="small">
              <i title="预览" class="fa fa-file-word-o"></i>
            </el-button>
            <el-button @click="updateTrial(scope.row)" type="text" size="small">
              <i title="编辑" class="fa fa-pencil-square-o"></i>
            </el-button>
            <el-button @click="removeTrial(scope.row)" type="text" size="small">
              <i title="删除" class="fa fa-trash"></i>
            </el-button>
          </template>
        </el-table-column>
      </el-table>
    </el-collapse-item>
    <el-collapse-item name="ocr" class="ocr">
      <template slot="title">
        <i class="fa fa-cloud-upload">&nbsp;&nbsp;案件材料</i>
      </template>
      <div class="wrap">
        <el-upload :action="uploadUrl" :before-upload="beforeAvatarUpload" :on-success="handleSuccess" :headers="headers" :data="uploadData" :limit="100" :auto-upload="true" multiple :file-list="fileList" list-type="picture">
          <el-button slot="trigger" size="small" type="warning" plain>
            <i class="fa fa-folder-open">&nbsp;选取文件</i>
          </el-button>
          <!-- <el-button size="mini" type="success" @click="submitUpload"
            <i class="fa fa-cloud-upload">&nbsp;上传材料</i>
          </el-button> -->
          <span slot="tip" class="el-upload__tip">
            &nbsp;
            <i class="fa fa-info-circle"></i>
            请上传jpg/jpeg、png格式的图片文件，大小不能超过4M。
          </span>
        </el-upload>
        <div class="thumbnail">
          <el-card v-for="(image,imageIndex) in images" :key="imageIndex" class="box-card">
            <div slot="header">
              <span :title="image.name">{{ image.name }}</span>
              <el-button @click="removeImage(image.name)" type="text" icon="el-icon-close" size="mini" plain></el-button>
            </div>
            <div>
              <img alt="请使用指定浏览器查看图片！" @click="openOcrModal('http://' + image.url)" :src="'http://' + image.url" class="img-thumbnail img-responsive" />
            </div>
          </el-card>
        </div>
      </div>
    </el-collapse-item>
  </el-collapse>
  <el-dialog title="案件材料OCR识别" :visible.sync="dialogImageVisible" class="dialog">
    <section class="left">
      <div class="box-body">
        <img :src="ocrImageUrl" class="img-responsive" />
      </div>
    </section>
    <section class="right">
      <div class="text-muted ocrResultStyle" contenteditable="true" v-loading="ocrResultLoading" element-loading-text="案件材料正在识别中...">
        <p v-for="result in ocrResult">
          {{result.text}}
        </p>
      </div>
    </section>
    <div slot="footer" class="dialog-footer">
      <el-button type="danger" plain size="small" @click="dialogFormVisible = false">取 消</el-button>
      <el-button type="primary" plain size="small" @click="ocrMaterial()">识 别</el-button>
    </div>
  </el-dialog>
</aside>
